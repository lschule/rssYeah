<%= form_tag articles_path, method: :get do %>
  <p>
    <%= text_field_tag :query, params[:query] %>
    <%= submit_tag "Search", name: nil %>
  </p>
<% end %>

<div id="facets">
  <h3>Feeds (Faceted Search)</h3>
  <ul>
    <% @articles.facets['feeds']['terms'].each do |facet| %>
      <li>
        <%= link_to_unless_current Feed.find(facet['term']).name, params.merge(feed_id: facet['term']) %>
        <% if params[:feed_id] == facet['term'].to_s %>
          (<%= link_to "remove", feed_id: nil %>)
        <% else %>
          (<%= facet['count'] %>)
        <% end %>
      </li>
    <% end %>
  </ul>
</div>

    <% @articles.each do |article| %>			
      <div class="article row <%= is_read(article.id,current_user.id) %>" data-article-id="<%= article.id  %>">	
		<div class="article-header" id="<%= article.id %>_header" >
       		<div class="article-actions">
				<i id="heart_<%= article.id %>" class="<%= is_hearted(article.id,current_user.id) %> heart"></i>
			</div>
			<h3 id="title_<%= article.id %>" class="article-title" data-toggle="collapse" data-target="#<%= article.id %>"><%= article.name %>&nbsp;<small><%= article.feed_name %></small></h3>
		</div>
		<div class="collapse article-content" id="<%= article.id %>">
			<small><%= link_to article.url, article.url %></small>
       		<small><%= article.published_at.try(:strftime,'%d %b %Y') %></small>
			<%= raw article.summary  %>
		</div>
	</div>
    <% end %>

<%= paginate @articles %>


